

	 
      import java.io.*; import java.net.*;  /**Create the socket,port  */  public class RealEchoServer{  	  	public static void main(String[] args){  	//for multiple connection  	int i=1;  	  	//create the socket  	try{  		ServerSocket s = new ServerSocket(9001);  		  		//socket accepted  		for(;;){  			Socket incoming = s.accept();  			System.out.println("Spawning"+i);  			new RealEchoHandler(incoming, i).start();  			i++;  		}  	}  	//if unsuccesfull to connect, print error  	catch (Exception e){System.out.println(e);} 	} }  //this class to handle multiple clients  incoming data class RealEchoHandler extends Thread{ 	DataInputStream in; 	DataOutputStream out; 	private Socket incoming; 	private int counter; 	 	//handle multiple client connecting 	public RealEchoHandler(Socket i,int c){ 		incoming = i; 		counter = c; 	} 	 	//get data from client 	public void run(){ 		 		//declare a variable so data can put in and out 		try{ 			in = new DataInputStream(incoming.getInputStream()); 			out = new DataOutputStream(incoming.getOutputStream()); 			 			//when socket is connect, print  			boolean done = false; 			String str=""; 			out.writeUTF("Connected!!\n"); 			out.flush(); 			 			//write to data in  out when client write 			while (!done){ 				out.writeUTF(">"); 				out.flush(); 				str = in.readUTF(); 				System.out.println(in+":"+str); 				if (str==null) 				    done=true; 				else{ 					out.writeUTF("Echo("+counter+"):"+str+"\n"); 					out.flush(); 				} 			}  		incoming.close(); 		}catch (Exception e){System.out.println(e);} 	} }
    
